{
  "modes": {
    "code": {
      "required_modules": [
        "core.tool-format",
        "core.base-rules",
        "core.system-info",
        "core.parameter-types",
        "core.state-management",
        "core.validation-pipeline",
        "tools.file-ops.*",
        "tools.search-ops.*"
      ],
      "optional_modules": [
        "tools.mcp.*",
        "core.optional.extended-capabilities"
      ],
      "instructions": [
        "shared.language-prefs",
        "shared.smart-system-base",
        "mode-specific.code-instructions"
      ],
      "restrictions": {
        "file_patterns": [".*"],
        "tool_access": ["all"],
        "validation_rules": {
          "pre_execution": ["tool_available", "params_complete", "format_valid", "state_valid"],
          "context_required": ["current_task", "file_access", "system_state"]
        }
      }
    },
    "architect": {
      "required_modules": [
        "core.tool-format",
        "core.base-rules",
        "core.system-info",
        "core.parameter-types",
        "core.state-management",
        "core.validation-pipeline",
        "tools.search-ops.*",
        "tools.read.*"
      ],
      "optional_modules": [
        "tools.mcp.*"
      ],
      "instructions": [
        "shared.language-prefs",
        "shared.smart-system-base",
        "mode-specific.architect-instructions"
      ],
      "restrictions": {
        "file_patterns": ["\\.md$"],
        "tool_access": ["read", "search", "ask"],
        "validation_rules": {
          "pre_execution": ["tool_available", "params_complete", "format_valid", "state_valid"],
          "context_required": ["planning_context", "system_state"]
        }
      }
    },
    "orchestrator": {
      "required_modules": [
        "core.tool-format",
        "core.base-rules",
        "core.system-info",
        "core.parameter-types",
        "core.state-management",
        "core.validation-pipeline"
      ],
      "optional_modules": [
        "tools.mcp.*"
      ],
      "instructions": [
        "shared.language-prefs",
        "shared.smart-system-base",
        "mode-specific.orchestrator-instructions"
      ],
      "restrictions": {
        "file_patterns": [],
        "tool_access": ["switch_mode", "ask"],
        "validation_rules": {
          "pre_execution": ["mode_valid", "context_preservable", "state_valid"],
          "context_required": ["task_stack", "mode_history", "system_state"]
        }
      }
    },
    "debug": {
      "required_modules": [
        "core.tool-format",
        "core.base-rules",
        "core.system-info",
        "core.parameter-types",
        "core.state-management",
        "core.validation-pipeline",
        "tools.file-ops.*",
        "tools.search-ops.*"
      ],
      "optional_modules": [
        "tools.mcp.*",
        "core.optional.extended-capabilities"
      ],
      "instructions": [
        "shared.language-prefs",
        "shared.smart-system-base",
        "mode-specific.debug-instructions"
      ],
      "restrictions": {
        "file_patterns": [".*"],
        "tool_access": ["read", "edit", "command", "search"],
        "validation_rules": {
          "pre_execution": ["tool_available", "params_complete", "format_valid", "state_valid"],
          "context_required": ["debug_context", "error_state", "system_state"]
        }
      }
    }
  },
  "defaults": {
    "required_modules": [
      "core.tool-format",
      "core.base-rules",
      "core.system-info",
      "core.parameter-types",
      "core.state-management",
      "core.validation-pipeline"
    ],
    "instructions": [
      "shared.language-prefs",
      "shared.smart-system-base"
    ],
    "restrictions": {
      "file_patterns": [".*"],
      "tool_access": ["read", "ask"],
      "validation_rules": {
        "pre_execution": ["tool_available", "params_complete", "state_valid"],
        "context_required": ["base_context", "system_state"]
      }
    }
  }
}