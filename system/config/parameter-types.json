{
  "parameter_types": {
    "path": {
      "type": "string",
      "validation": {
        "pattern": "^[a-zA-Z0-9/_.-]+$",
        "max_length": 255,
        "must_exist": true,
        "restrictions": {
          "no_parent_traversal": true,
          "no_absolute_paths": true,
          "allowed_prefixes": ["system/"],
          "denied_patterns": ["^/", "^\\.\\.", "~"]
        }
      }
    },
    "content": {
      "type": "string",
      "validation": {
        "max_size": "10MB",
        "required": true,
        "format_check": "content_format_valid"
      }
    },
    "line_count": {
      "type": "integer",
      "validation": {
        "min": 1,
        "must_match": "actual_line_count",
        "required": true
      }
    },
    "mode_slug": {
      "type": "string",
      "validation": {
        "pattern": "^[a-z-]+$",
        "must_exist": true,
        "required": true,
        "allowed_values": ["code", "architect", "debug", "orchestrator"]
      }
    },
    "server_name": {
      "type": "string",
      "validation": {
        "must_exist": true,
        "check_connection": true,
        "required": true,
        "error_message": "MCP server must be connected and available"
      }
    },
    "tool_name": {
      "type": "string",
      "validation": {
        "must_exist": true,
        "check_availability": true,
        "required": true,
        "error_message": "MCP tool must be available on the specified server"
      }
    },
    "parameters": {
      "type": "object",
      "validation": {
        "valid_json": true,
        "required": true,
        "check_schema": true
      }
    },
    "regex": {
      "type": "string",
      "validation": {
        "valid_regex": true,
        "max_length": 1000,
        "required": true
      }
    },
    "result": {
      "type": "string",
      "validation": {
        "required": true,
        "max_length": 10000
      }
    }
  },
  "tool_parameters": {
    "read_file": {
      "path": {
        "type": "path",
        "required": true,
        "access": "read"
      }
    },
    "write_to_file": {
      "path": {
        "type": "path",
        "required": true,
        "access": "write"
      },
      "content": {
        "type": "content",
        "required": true
      },
      "line_count": {
        "type": "line_count",
        "required": true
      }
    },
    "search_files": {
      "regex": {
        "type": "regex",
        "required": true
      },
      "path": {
        "type": "path",
        "required": true,
        "access": "read"
      }
    },
    "use_mcp_tool": {
      "server_name": {
        "type": "server_name",
        "required": true
      },
      "tool_name": {
        "type": "tool_name",
        "required": true
      },
      "parameters": {
        "type": "parameters",
        "required": true
      }
    },
    "switch_mode": {
      "mode_slug": {
        "type": "mode_slug",
        "required": true
      }
    },
    "attempt_completion": {
      "result": {
        "type": "result",
        "required": true
      }
    }
  },
  "validation_functions": {
    "content_format_valid": {
      "description": "Validates content format based on file type",
      "checks": [
        "character_encoding",
        "line_endings",
        "no_null_bytes"
      ]
    },
    "actual_line_count": {
      "description": "Counts actual lines in content",
      "method": "count_newlines_plus_one"
    },
    "valid_regex": {
      "description": "Validates regex pattern syntax",
      "method": "regex_syntax_check"
    },
    "check_mcp_connection": {
      "description": "Validates MCP server connection",
      "method": "verify_server_connection"
    }
  },
  "type_coercion": {
    "enabled": false,
    "message": "Type coercion is disabled. All parameters must match their defined types exactly."
  }
}